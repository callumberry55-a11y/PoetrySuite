import{r,j as e,Z as de,C as V,B as Y,A as X,S as q,R as me,M as ue,u as xe,s as j,X as ee}from"./index-CGemffCt.js";import{h as pe,g as fe}from"./index.esm-hzf3Ma5u.js";import{a as he}from"./firebase-DRdGEDvY.js";import{c as _,a as ge,s as ye,d as be}from"./ai-DtILrpuj.js";import{C as ve}from"./circle-check-big-gJTh1YIL.js";import{W as te}from"./wand-sparkles-BhoilX9i.js";import{M as se}from"./mic-L0AUVI5v.js";import{A as je}from"./arrow-left-DtVZ9cb3.js";import{M as Ne,E as we,a as ke,T as K,b as Ce}from"./type-B2v0o5Jv.js";import{E as Se}from"./eye-CihzmZqK.js";import{S as Pe}from"./star-kPRirAjA.js";import{G as ze}from"./globe-DrygjtXM.js";import{L as Ae}from"./lock-Bpvz4WVX.js";import{C as Ee}from"./clock-CH5mnwFd.js";import{S as Ie}from"./save-DRwAVCRA.js";const Te=fe(he),$e=pe(Te,"generateTags");function Fe({content:u,onInsertText:R,onReplaceText:b}){const[x,I]=r.useState("analyze"),[o,d]=r.useState(!1),[i,s]=r.useState(null),[h,T]=r.useState(""),[g,$]=r.useState(""),[S,P]=r.useState(""),[f,L]=r.useState("checking");r.useEffect(()=>{L("available")},[]);const G=async()=>{if(!u.trim()){s({text:"Please write some poetry first!",type:"info"});return}d(!0),s(null);try{const t="You are an expert poetry analyst and critic. Provide detailed, insightful analysis of poems.",a=`Analyze this poem in detail:

${u}

Please provide:
1. Poetic form and structure (if identifiable)
2. Meter and rhythm analysis
3. Rhyme scheme (if present)
4. Literary devices used
5. Themes and meanings
6. Emotional tone and mood
7. Strengths and suggestions for improvement

Be specific and constructive.`,c=await _(t,a);s({text:c,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to analyze poem",type:"error"})}finally{d(!1)}},F=async()=>{if(!u.trim()){s({text:"Please write some poetry first!",type:"info"});return}d(!0),s(null);try{const[t,a,c]=await Promise.all([ge(u),ye(u),be(u)]),z=`ðŸ“Š DETAILED INSIGHTS

ðŸŽ­ SENTIMENT ANALYSIS
Overall Sentiment: ${t.sentiment.toUpperCase()}
Emotional Score: ${(t.score*100).toFixed(0)}%
Key Emotions: ${t.emotions.join(", ")}

ðŸ“ FORM DETECTION
Identified Form: ${c.form}
Confidence: ${(c.confidence*100).toFixed(0)}%
Characteristics: ${c.characteristics.join(", ")}

â­ QUALITY SCORES (out of 10)
Overall: ${a.overall}
Imagery: ${a.imagery}
Rhythm & Flow: ${a.rhythm}
Originality: ${a.originality}
Emotional Impact: ${a.emotion}

ðŸ’¡ FEEDBACK
${a.feedback}`;s({text:z,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to get insights",type:"error"})}finally{d(!1)}},O=async()=>{if(!u.trim()){s({text:"Please write some poetry first!",type:"info"});return}d(!0),s(null);try{const t="You are an expert poetry editor. Suggest improvements while preserving the poet's voice and intent.",a=`Suggest improvements for this poem:

${u}

Provide:
1. Specific line-by-line suggestions
2. Better word choices where appropriate
3. Improvements to rhythm and flow
4. Ways to strengthen imagery
5. An improved version of the poem

Keep the original meaning and style but enhance the craft.`,c=await _(t,a);s({text:c,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to improve poem",type:"error"})}finally{d(!1)}},N=async()=>{if(!h.trim()){s({text:"Please enter a prompt or theme!",type:"info"});return}d(!0),s(null);try{const t="You are a talented poet. Create original, meaningful poetry based on the given prompts.";let a=`Write a poem about: ${h}`;g&&(a+=`

Style: Write in the style of ${g}, capturing their distinctive voice, themes, and techniques.`),a+=`

Create a complete, polished poem (8-20 lines recommended). Only output the poem itself, no explanations.`;const c=await _(t,a);s({text:c,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to generate poem",type:"error"})}finally{d(!1)}},k=async()=>{if(!S.trim()){s({text:"Please enter a word to find rhymes for!",type:"info"});return}d(!0),s(null);try{const t="You are a rhyming dictionary and poetry assistant. Provide creative rhyming suggestions.",a=`Find rhymes and near-rhymes for the word: "${S}"

Provide:
1. Perfect rhymes (20-30 words)
2. Near rhymes / slant rhymes (15-20 words)
3. Multisyllabic rhymes if applicable (10-15 phrases)
4. Creative usage examples in short poetic lines (5 examples)

Format the response clearly with categories.`,c=await _(t,a);s({text:c,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to find rhymes",type:"error"})}finally{d(!1)}},D=async()=>{if(!u.trim()){s({text:"Please write some poetry first!",type:"info"});return}d(!0),s(null);try{const t="You are a collaborative poetry assistant. Continue poems while maintaining style, rhythm, and theme.",a=`Continue this poem naturally (add 2-4 more lines):

${u}

Match the existing style, meter, rhyme scheme (if present), and themes. Only provide the additional lines.`,c=await _(t,a);s({text:c,type:"success"})}catch(t){s({text:t instanceof Error?t.message:"Failed to continue poem",type:"error"})}finally{d(!1)}},y=[{id:"analyze",label:"Analyze",icon:Y},{id:"insights",label:"Insights",icon:X},{id:"improve",label:"Improve",icon:te},{id:"generate",label:"Generate",icon:q},{id:"rhyme",label:"Rhyme",icon:se}];return e.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[e.jsx("div",{className:"border-b border-outline/30 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-on-surface flex items-center gap-2",children:[e.jsx(de,{size:24,className:"text-primary"}),"AI Poetry Assistant"]}),f==="available"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(ve,{size:16}),e.jsx("span",{children:"AI Ready"})]}),f==="missing"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-error",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"API Key Missing"})]})]})}),f==="missing"&&e.jsx("div",{className:"mx-4 mt-4 p-4 bg-error-container/20 border border-error rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"text-error flex-shrink-0 mt-1",size:20}),e.jsxs("div",{className:"flex-1 text-sm text-on-error-container",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Gemini API Key Not Found"}),e.jsx("p",{className:"mb-2",children:"To use AI features, you need to add your Gemini API key to the environment variables."}),e.jsxs("ol",{className:"list-decimal ml-4 space-y-1",children:[e.jsxs("li",{children:["Get your free API key from ",e.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google AI Studio"})]}),e.jsx("li",{children:"Add it to your .env file as: VITE_GEMINI_API_KEY=your-key-here"}),e.jsx("li",{children:"Refresh the page to load the new API key"})]})]})]})}),e.jsx("div",{className:"border-b border-outline/30 flex overflow-x-auto",children:y.map(({id:t,label:a,icon:c})=>e.jsxs("button",{onClick:()=>{I(t),s(null)},className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors whitespace-nowrap ${x===t?"text-primary border-b-2 border-primary bg-primary-container/20":"text-on-surface-variant hover:text-on-surface hover:bg-surface-variant/50"}`,children:[e.jsx(c,{size:18}),a]},t))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[x==="analyze"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-on-surface-variant text-sm",children:"Get detailed analysis of your poem including form, meter, rhyme scheme, literary devices, and suggestions."}),e.jsxs("button",{onClick:G,disabled:o||f!=="available",className:"w-full bg-primary text-on-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(Y,{size:20}),o?"Analyzing...":"Analyze Poem"]})]}),x==="insights"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-on-surface-variant text-sm",children:"Get comprehensive AI-powered insights including sentiment analysis, form detection, and quality scores."}),e.jsxs("button",{onClick:F,disabled:o||f!=="available",className:"w-full bg-primary text-on-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(X,{size:20}),o?"Analyzing...":"Get Detailed Insights"]})]}),x==="improve"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-on-surface-variant text-sm",children:"Get AI-powered suggestions to enhance your poem's imagery, rhythm, word choice, and overall impact."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:O,disabled:o||f!=="available",className:"flex-1 bg-primary text-on-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(te,{size:20}),o?"Improving...":"Suggest Improvements"]}),e.jsxs("button",{onClick:D,disabled:o||f!=="available",className:"flex-1 bg-secondary text-on-secondary px-6 py-3 rounded-lg font-medium hover:bg-secondary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(me,{size:20}),o?"Continuing...":"Continue Poem"]})]})]}),x==="generate"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prompt",className:"block text-sm font-medium text-on-surface mb-2",children:"Prompt or Theme"}),e.jsx("textarea",{id:"prompt",value:h,onChange:t=>T(t.target.value),placeholder:"Enter a theme, emotion, or topic (e.g., 'the ocean at dawn' or 'loneliness in the city')",className:"w-full px-4 py-3 bg-surface-variant text-on-surface rounded-lg border border-outline/30 focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style",className:"block text-sm font-medium text-on-surface mb-2",children:"Style (Optional)"}),e.jsxs("select",{id:"style",value:g,onChange:t=>$(t.target.value),className:"w-full px-4 py-3 bg-surface-variant text-on-surface rounded-lg border border-outline/30 focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Original Style"}),e.jsx("option",{value:"Emily Dickinson",children:"Emily Dickinson"}),e.jsx("option",{value:"William Shakespeare",children:"William Shakespeare"}),e.jsx("option",{value:"Maya Angelou",children:"Maya Angelou"}),e.jsx("option",{value:"Robert Frost",children:"Robert Frost"}),e.jsx("option",{value:"Edgar Allan Poe",children:"Edgar Allan Poe"}),e.jsx("option",{value:"Langston Hughes",children:"Langston Hughes"}),e.jsx("option",{value:"Sylvia Plath",children:"Sylvia Plath"}),e.jsx("option",{value:"Pablo Neruda",children:"Pablo Neruda"}),e.jsx("option",{value:"Rumi",children:"Rumi"}),e.jsx("option",{value:"Mary Oliver",children:"Mary Oliver"})]})]}),e.jsxs("button",{onClick:N,disabled:o||f!=="available",className:"w-full bg-primary text-on-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(q,{size:20}),o?"Generating...":"Generate Poem"]})]}),x==="rhyme"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rhyme-word",className:"block text-sm font-medium text-on-surface mb-2",children:"Find Rhymes"}),e.jsx("input",{id:"rhyme-word",type:"text",value:S,onChange:t=>P(t.target.value),placeholder:"Enter a word (e.g., 'love', 'night', 'dream')",className:"w-full px-4 py-3 bg-surface-variant text-on-surface rounded-lg border border-outline/30 focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("button",{onClick:k,disabled:o||f!=="available",className:"w-full bg-primary text-on-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(se,{size:20}),o?"Finding...":"Find Rhymes"]})]}),o&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"relative w-20 h-20",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-[walk_0.8s_ease-in-out_infinite]",children:[e.jsx("ellipse",{cx:"50",cy:"55",rx:"20",ry:"18",fill:"currentColor",className:"text-primary opacity-90"}),e.jsx("circle",{cx:"65",cy:"45",r:"12",fill:"currentColor",className:"text-primary"}),e.jsx("path",{d:"M 75 45 L 82 43 L 82 47 Z",fill:"currentColor",className:"text-primary/70"}),e.jsx("circle",{cx:"70",cy:"43",r:"2",fill:"currentColor",className:"text-background"}),e.jsx("ellipse",{cx:"45",cy:"55",rx:"12",ry:"15",fill:"currentColor",className:"text-primary/60",transform:"rotate(-20 45 55)"}),e.jsx("ellipse",{cx:"32",cy:"58",rx:"8",ry:"12",fill:"currentColor",className:"text-primary/80",transform:"rotate(25 32 58)"}),e.jsxs("g",{className:"animate-[step-left_0.8s_ease-in-out_infinite]",children:[e.jsx("line",{x1:"45",y1:"70",x2:"45",y2:"80",stroke:"currentColor",strokeWidth:"2",className:"text-primary/90"}),e.jsx("path",{d:"M 45 80 L 42 82 M 45 80 L 48 82",stroke:"currentColor",strokeWidth:"2",className:"text-primary/90"})]}),e.jsxs("g",{className:"animate-[step-right_0.8s_ease-in-out_infinite]",children:[e.jsx("line",{x1:"55",y1:"70",x2:"55",y2:"80",stroke:"currentColor",strokeWidth:"2",className:"text-primary/90"}),e.jsx("path",{d:"M 55 80 L 52 82 M 55 80 L 58 82",stroke:"currentColor",strokeWidth:"2",className:"text-primary/90"})]})]})})}),i&&e.jsx("div",{className:`p-4 rounded-lg ${i.type==="error"?"bg-error-container text-on-error-container":i.type==="info"?"bg-secondary-container text-on-secondary-container":"bg-tertiary-container text-on-tertiary-container"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ue,{size:20,className:"flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:i.text}),i.type==="success"&&x==="generate"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>R(`

`+i.text),className:"px-4 py-2 bg-primary text-on-primary rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors",children:"Insert Below"}),e.jsx("button",{onClick:()=>b(i.text),className:"px-4 py-2 bg-secondary text-on-secondary rounded-lg text-sm font-medium hover:bg-secondary/90 transition-colors",children:"Replace Current"})]}),i.type==="success"&&x==="improve"&&e.jsx("button",{onClick:()=>R(`

---
AI Suggestions:
`+i.text),className:"px-4 py-2 bg-primary text-on-primary rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors",children:"Add as Notes"})]})]})})]})]})}function Qe({selectedPoemId:u,onBack:R}){const{user:b}=xe(),[x,I]=r.useState(null),[o,d]=r.useState(""),[i,s]=r.useState(""),[h,T]=r.useState(!1),[g,$]=r.useState(!1),[S,P]=r.useState([]),[f,L]=r.useState(!1),[G,F]=r.useState(null),[O,N]=r.useState(null),[k,D]=r.useState(!1),[y,t]=r.useState(!1),[a,c]=r.useState(!1),[z,B]=r.useState("medium"),C=r.useRef(null),W=r.useRef(null),Z=r.useRef(null),w=i.trim()?i.trim().split(/\s+/).length:0,ae=i.trim()?i.split(`
`).length:1,re=i.length,ie=Math.ceil(w/200),U=r.useCallback(async()=>{if(!(!b||!b.id||!i.trim()&&!o.trim())){L(!0),N(null),C.current&&clearTimeout(C.current);try{const n={user_id:b.id,title:o.trim()||"Untitled Poem",content:i,is_public:h,favorited:g,word_count:w,updated_at:new Date().toISOString()};let l=x;if(x){const{error:m}=await j.from("poems").update(n).eq("id",x);if(m)throw m}else{const{data:m,error:p}=await j.from("poems").insert(n).select("id").single();if(p)throw p;m&&(l=m.id,I(m.id))}if(l&&i.trim())try{const p=(await $e({poemContent:i})).data;if(p&&Array.isArray(p.tags)&&p.tags.length>0){await j.from("poem_tags").delete().eq("poem_id",l);for(const E of p.tags){let v=null;const{data:M}=await j.from("tags").select("id").eq("name",E).eq("user_id",b.id).maybeSingle();if(M)v=M.id;else{const{data:J,error:ce}=await j.from("tags").insert({name:E,user_id:b.id}).select("id").single();!ce&&J&&(v=J.id)}v&&await j.from("poem_tags").insert({poem_id:l,tag_id:v})}const{data:A}=await j.from("poem_tags").select("tag_id, tags(name)").eq("poem_id",l);if(A){const E=A.map(v=>{var M;return(M=v.tags)==null?void 0:M.name}).filter(Boolean);P(E)}}}catch(m){console.warn("Could not generate or save tags:",m)}F(new Date)}catch(n){console.error(n),N("Failed to save poem. Please check your connection.")}finally{L(!1)}}},[b,i,o,h,g,w,x]);r.useEffect(()=>{W.current=U},[U]);const H=r.useCallback(()=>{d(""),s(""),T(!1),$(!1),P([]),F(null),N(null),I(null)},[]),Q=r.useCallback(async n=>{if(!(!n||!b))try{const{data:l,error:m}=await j.from("poems").select("*").eq("id",n).single();if(m)throw m;if(l){d(l.title),s(l.content),T(l.is_public),$(l.favorited),F(null),N(null),I(n);const{data:p}=await j.from("poem_tags").select("tag_id, tags(name)").eq("poem_id",n);if(p&&p.length>0){const A=p.map(E=>{var v;return(v=E.tags)==null?void 0:v.name}).filter(Boolean);P(A)}else P([])}}catch(l){console.error(l),N("Failed to load poem.")}},[b]);r.useEffect(()=>{u?Q(u):H()},[u,Q,H]),r.useEffect(()=>((i.trim()||o.trim())&&(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{var n;(n=W.current)==null||n.call(W)},1500)),()=>{C.current&&clearTimeout(C.current)}),[o,i]);const ne=n=>{const l=Z.current;if(l){const m=l.selectionStart,p=l.selectionEnd,A=i.substring(0,m)+n+i.substring(p);s(A),setTimeout(()=>{l.focus(),l.setSelectionRange(m+n.length,m+n.length)},0)}else s(i+n)},oe=n=>{s(n)},le={small:"text-base",medium:"text-lg",large:"text-xl"};return e.jsxs("div",{className:`h-full flex ${a?"bg-slate-50 dark:bg-slate-900":"bg-background"} flex-1 transition-colors duration-300`,children:[e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:e.jsxs("div",{className:`${a?"max-w-3xl":y?"max-w-4xl":"max-w-5xl"} mx-auto w-full px-4 sm:px-6 lg:px-8 py-6 sm:py-8 transition-all duration-300`,children:[!a&&e.jsxs("div",{className:"flex items-center justify-between mb-6 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsxs("button",{onClick:R,className:"flex items-center gap-2 text-on-surface-variant hover:text-on-surface transition-all hover:gap-3 group","aria-label":"Go back to library",children:[e.jsx(je,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-medium",children:"Back to Library"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(!0),className:"p-2 text-on-surface-variant hover:text-on-surface hover:bg-surface-variant rounded-lg transition-all","aria-label":"Enter zen mode",title:"Zen Mode",children:e.jsx(Ne,{size:18})}),e.jsx("button",{onClick:()=>t(!y),className:`p-2 rounded-lg transition-all ${y?"text-primary bg-primary-container":"text-on-surface-variant hover:text-on-surface hover:bg-surface-variant"}`,"aria-label":y?"Exit focus mode":"Enter focus mode",title:"Focus Mode",children:y?e.jsx(Se,{size:18}):e.jsx(we,{size:18})})]})]}),a&&e.jsx("div",{className:"flex items-center justify-end mb-6 animate-in fade-in duration-500",children:e.jsx("button",{onClick:()=>c(!1),className:"p-2 text-on-surface-variant hover:text-on-surface hover:bg-surface-variant rounded-lg transition-all","aria-label":"Exit zen mode",children:e.jsx(ke,{size:18})})}),O&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 rounded-xl border border-red-200 dark:border-red-800 animate-in slide-in-from-top-2 duration-300",role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-1",children:O}),e.jsx("button",{onClick:()=>N(null),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:e.jsx(ee,{size:18})})]})}),e.jsxs("div",{className:`bg-surface rounded-2xl shadow-xl overflow-hidden border transition-all duration-300 animate-in fade-in slide-in-from-bottom-4 ${a?"border-transparent shadow-2xl":"border-outline/20 hover:border-outline/40"}`,children:[!y&&!a&&e.jsx("div",{className:"p-4 sm:p-6 border-b border-outline/20 bg-gradient-to-r from-surface to-surface-variant/30",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>$(!g),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all hover:scale-105 active:scale-95 ${g?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 shadow-md":"bg-surface-variant/50 text-on-surface-variant hover:bg-surface-variant"}`,"aria-pressed":g,children:[e.jsx(Pe,{size:16,fill:g?"currentColor":"none",className:g?"animate-in zoom-in duration-300":""}),e.jsx("span",{className:"text-sm font-semibold",children:"Favorite"})]}),e.jsxs("button",{onClick:()=>T(!h),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all hover:scale-105 active:scale-95 ${h?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 shadow-md":"bg-surface-variant/50 text-on-surface-variant hover:bg-surface-variant"}`,"aria-pressed":h,children:[h?e.jsx(ze,{size:16}):e.jsx(Ae,{size:16}),e.jsx("span",{className:"text-sm font-semibold",children:h?"Public":"Private"})]}),e.jsxs("button",{onClick:()=>D(!k),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all hover:scale-105 active:scale-95 ${k?"bg-gradient-to-r from-violet-500 to-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-300 hover:shadow-md"}`,"aria-pressed":k,children:[e.jsx(q,{size:16,className:k?"animate-pulse":""}),e.jsx("span",{className:"text-sm font-semibold",children:"AI Assistant"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-surface-variant/50 rounded-xl p-1 ml-auto",children:[e.jsx("button",{onClick:()=>B("small"),className:`p-2 rounded-lg transition-all ${z==="small"?"bg-surface text-on-surface shadow-sm":"text-on-surface-variant hover:text-on-surface"}`,title:"Small text",children:e.jsx(K,{size:14})}),e.jsx("button",{onClick:()=>B("medium"),className:`p-2 rounded-lg transition-all ${z==="medium"?"bg-surface text-on-surface shadow-sm":"text-on-surface-variant hover:text-on-surface"}`,title:"Medium text",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>B("large"),className:`p-2 rounded-lg transition-all ${z==="large"?"bg-surface text-on-surface shadow-sm":"text-on-surface-variant hover:text-on-surface"}`,title:"Large text",children:e.jsx(K,{size:18})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-on-surface-variant",children:[e.jsxs("div",{className:"flex items-center gap-6 bg-surface/50 backdrop-blur-sm px-4 py-2 rounded-xl border border-outline/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{size:14}),e.jsx("span",{className:"font-semibold",children:w}),e.jsx("span",{className:"text-xs opacity-70",children:"words"})]}),e.jsx("div",{className:"w-px h-4 bg-outline/20"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:ae}),e.jsx("span",{className:"text-xs opacity-70",children:"lines"})]}),e.jsx("div",{className:"w-px h-4 bg-outline/20"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:re}),e.jsx("span",{className:"text-xs opacity-70",children:"chars"})]}),e.jsx("div",{className:"w-px h-4 bg-outline/20"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{size:14}),e.jsx("span",{className:"font-semibold",children:ie}),e.jsx("span",{className:"text-xs opacity-70",children:"min read"})]})]}),e.jsxs("div",{className:"ml-auto",children:[f&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-1.5 rounded-full border border-blue-200 dark:border-blue-800",children:[e.jsx(Ie,{size:14,className:"animate-pulse"}),e.jsx("span",{className:"text-xs font-semibold",children:"Saving..."})]}),!f&&G&&e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full border border-emerald-200 dark:border-emerald-800",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs font-semibold",children:["Saved ",G.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),S.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap pt-2 border-t border-outline/10",children:[e.jsx(Ce,{size:16,className:"text-on-surface-variant opacity-60"}),S.map(n=>e.jsx("span",{className:"bg-gradient-to-r from-primary-container to-secondary-container text-on-primary-container text-xs font-semibold px-3 py-1 rounded-full shadow-sm",children:n},n))]})]})}),e.jsx("div",{className:`${y||a?"p-6 sm:p-8":"p-4 sm:p-6"} border-b border-outline/10`,children:e.jsx("input",{type:"text",value:o,onChange:n=>d(n.target.value),className:`w-full ${a?"text-4xl":"text-3xl sm:text-4xl"} font-bold bg-transparent border-none outline-none text-on-surface placeholder:text-on-surface-variant/50 transition-all focus:placeholder:text-on-surface-variant/70`,placeholder:"Untitled Poem","aria-label":"Poem title"})}),e.jsx("div",{className:`${y||a?"p-8 sm:p-12":"p-6 sm:p-8"}`,children:e.jsx("textarea",{ref:Z,value:i,onChange:n=>s(n.target.value),className:`w-full min-h-[calc(100vh-400px)] sm:min-h-[600px] bg-transparent border-none outline-none text-on-surface ${le[z]} leading-relaxed resize-none font-serif placeholder:text-on-surface-variant/50 transition-all focus:placeholder:text-on-surface-variant/70`,placeholder:"Let your words flow like a gentle stream...","aria-label":"Poem content",spellCheck:"true"})}),!y&&!a&&w>0&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-surface-variant/30 to-surface border-t border-outline/10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-2 bg-outline/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-secondary transition-all duration-500 ease-out rounded-full",style:{width:`${Math.min(w/100*100,100)}%`}})})}),e.jsx("span",{className:"text-xs font-semibold text-on-surface-variant whitespace-nowrap",children:w<50?"Just starting...":w<100?"Getting there!":"Great progress!"})]})})]})]})}),k&&!a&&e.jsxs("div",{className:"w-full lg:w-96 border-l border-outline/20 bg-surface flex-shrink-0 overflow-hidden flex flex-col shadow-2xl animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-outline/20 bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-900/20 dark:to-purple-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:18,className:"text-violet-600 dark:text-violet-400"}),e.jsx("h3",{className:"font-bold text-on-surface",children:"AI Assistant"})]}),e.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-surface rounded-lg transition-all hover:rotate-90","aria-label":"Close AI Assistant",children:e.jsx(ee,{size:20})})]}),e.jsx(Fe,{content:i,onInsertText:ne,onReplaceText:oe})]})]})}export{Qe as default};
