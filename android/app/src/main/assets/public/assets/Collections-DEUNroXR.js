import{u as g,r as l,s as m,j as e,J as d}from"./index-CGemffCt.js";import{P as k}from"./plus-zAg5GACl.js";import{G as b}from"./globe-DrygjtXM.js";import{L as j}from"./lock-Bpvz4WVX.js";function C(){const{user:s}=g(),[n,h]=l.useState([]),[u,i]=l.useState(!1),[f,c]=l.useState(!0),[a,o]=l.useState({name:"",description:"",is_public:!1});l.useEffect(()=>{s&&x()},[s]);const x=async()=>{c(!0);try{const{data:t,error:r}=await m.from("poetry_collections").select("*").eq("user_id",s==null?void 0:s.id).order("created_at",{ascending:!1});if(r)throw r;h(t||[])}catch(t){console.error("Error loading collections:",t)}finally{c(!1)}},p=async t=>{t.preventDefault();try{const{error:r}=await m.from("poetry_collections").insert({...a,user_id:s==null?void 0:s.id});if(r)throw r;i(!1),o({name:"",description:"",is_public:!1}),x()}catch(r){console.error("Error creating collection:",r)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 pb-24",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-rose-600 via-pink-600 to-fuchsia-600 h-32 sm:h-40",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[e.jsx(d,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-2 animate-pulse"}),e.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-1",children:"Poetry Collections"}),e.jsx("p",{className:"text-sm sm:text-base opacity-90",children:"Curate your literary anthology"})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 -mt-8 space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Organize your poems into curated collections and anthologies"}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx(k,{className:"w-5 h-5"}),"New Collection"]})]})}),f?e.jsx("div",{className:"flex items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-slate-200 dark:border-slate-800"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-rose-600 border-t-transparent animate-spin"})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.length===0?e.jsxs("div",{className:"col-span-full text-center py-16 bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-lg",children:[e.jsx(d,{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-700"}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 font-medium",children:"No collections yet. Create one to get started!"})]}):n.map(t=>e.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-500 to-pink-500 rounded-2xl shadow-lg flex-shrink-0",children:e.jsx(d,{className:"text-white",size:24})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white truncate",children:t.name})]}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:t.is_public?e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsx(b,{className:"text-blue-600 dark:text-blue-400",size:18})}):e.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-xl border border-slate-300 dark:border-slate-600",children:e.jsx(j,{className:"text-slate-600 dark:text-slate-400",size:18})})})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4 line-clamp-2 leading-relaxed",children:t.description}),e.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-800/50 rounded-xl",children:e.jsxs("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:[t.poem_count||0," poems"]})})]},t.id))}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-200 dark:border-slate-800 animate-in slide-in-from-bottom duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-500 to-pink-500 rounded-2xl shadow-lg",children:e.jsx(d,{className:"text-white",size:24})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Create Collection"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:t=>o({...a,name:t.target.value}),className:"w-full px-4 py-3 border-2 border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-rose-500 focus:border-rose-500 transition-all font-medium",placeholder:"My Poetry Collection"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>o({...a,description:t.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-rose-500 focus:border-rose-500 transition-all font-medium resize-none",placeholder:"A collection of my favorite poems..."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-800/50 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"is_public",checked:a.is_public,onChange:t=>o({...a,is_public:t.target.checked}),className:"w-5 h-5 text-rose-600 border-slate-300 dark:border-slate-600 rounded focus:ring-rose-500 cursor-pointer"}),e.jsx("label",{htmlFor:"is_public",className:"text-sm font-semibold text-slate-700 dark:text-slate-300 cursor-pointer flex-1",children:"Make this collection public"}),e.jsx(b,{className:"text-slate-400",size:18})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-all font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold",children:"Create"})]})]})]})})]})]})}export{C as default};
