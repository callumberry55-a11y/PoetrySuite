import{u as W,r,j as e,a1 as p,s as $}from"./index-CGemffCt.js";import{C as k,P as R}from"./pause-lOKbM4c-.js";import{P as I,R as F}from"./rotate-ccw-CFQf6qtS.js";function q(){const{user:b}=W(),[o,n]=r.useState(25),[i,l]=r.useState(0),[a,c]=r.useState(!1),[t,m]=r.useState("work"),[f,w]=r.useState(0),[u,h]=r.useState(25),d=r.useRef(null),v=[{label:"5 min",value:5},{label:"15 min",value:15},{label:"25 min (Pomodoro)",value:25},{label:"45 min",value:45},{label:"60 min",value:60}];r.useEffect(()=>(a?d.current=setInterval(()=>{i===0?o===0?N():(n(o-1),l(59)):l(i-1)},1e3):d.current&&clearInterval(d.current),()=>{d.current&&clearInterval(d.current)}),[a,o,i]);const j=async s=>{if(b)try{await $.rpc("log_daily_writing",{p_user_id:b.id,p_word_count:0,p_poems_written:0,p_minutes_spent:s})}catch(x){console.error("Error logging writing session:",x)}},N=async()=>{c(!1),t==="work"?(await j(u),w(f+1),m("break"),n(5),l(0),"Notification"in window&&Notification.permission==="granted"&&new Notification("Writing session complete!",{body:"Time for a 5-minute break"})):(m("work"),n(25),l(0),h(25),"Notification"in window&&Notification.permission==="granted"&&new Notification("Break complete!",{body:"Ready for another writing session?"}))},y=()=>{a||("Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),t==="work"&&h(o+(i>0?1:0))),c(!a)},S=()=>{c(!1),n(25),l(0),m("work")},T=s=>{c(!1),n(s),l(0),m("work")},P=(s,x)=>`${s.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`,g=t==="work"?u*60:300,C=o*60+i,_=(g-C)/g*100;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 pb-24",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 h-32 sm:h-40",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[e.jsx(p,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-2 animate-pulse"}),e.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-1",children:"Writing Timer"}),e.jsx("p",{className:"text-sm sm:text-base opacity-90",children:"Focus your creative energy"})]})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 -mt-8 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-800 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center gap-2 px-6 py-3 rounded-2xl mb-8 shadow-lg font-semibold ${t==="work"?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white":"bg-gradient-to-r from-blue-500 to-cyan-500 text-white"}`,children:t==="work"?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{children:"Writing Session"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"Break Time"})]})}),e.jsxs("div",{className:"relative inline-block mb-10",children:[e.jsxs("svg",{className:"w-72 h-72",viewBox:"0 0 200 200",children:[e.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-slate-200 dark:text-slate-800"}),e.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"none",stroke:"url(#gradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*85}`,strokeDashoffset:`${2*Math.PI*85*(1-_/100)}`,className:"transition-all duration-1000",transform:"rotate(-90 100 100)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:t==="work"?"#10b981":"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:t==="work"?"#14b8a6":"#06b6d4"})]})})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`text-7xl font-bold font-mono transition-all ${a?"scale-110":"scale-100"} ${t==="work"?"bg-gradient-to-r from-emerald-600 to-teal-600":"bg-gradient-to-r from-blue-600 to-cyan-600"} bg-clip-text text-transparent`,children:P(o,i)})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[e.jsx("button",{onClick:y,className:`px-10 py-4 text-white rounded-2xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center gap-3 ${t==="work"?"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600":"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-6 h-6"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-6 h-6"}),"Start"]})}),e.jsxs("button",{onClick:S,className:"px-10 py-4 bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-2xl hover:bg-slate-300 dark:hover:bg-slate-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-3",children:[e.jsx(F,{className:"w-6 h-6"}),"Reset"]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:v.map(s=>e.jsx("button",{onClick:()=>T(s.value),disabled:a,className:"px-4 py-2 text-sm bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:from-emerald-100 hover:to-teal-100 dark:hover:from-emerald-900/30 dark:hover:to-teal-900/30 hover:text-emerald-700 dark:hover:text-emerald-300 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed border border-slate-300 dark:border-slate-600",children:s.label},s.value))})]}),e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-8 mt-8",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center justify-center gap-4 px-8 py-4 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-2xl border-2 border-amber-200 dark:border-amber-800",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-amber-600 to-yellow-600 bg-clip-text text-transparent",children:f}),e.jsx("div",{className:"text-sm text-amber-700 dark:text-amber-300 font-semibold",children:"Sessions Today"})]})})})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-3xl border-2 border-blue-200 dark:border-blue-800 p-6 shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-900 dark:text-blue-100 mb-3 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Pomodoro Technique"]}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 leading-relaxed",children:"Work in focused 25-minute sessions followed by 5-minute breaks. After 4 sessions, take a longer 15-30 minute break. This technique helps maintain focus and prevents burnout."})]})]})]})}export{q as default};
