import{r as t,s as S,j as e,I as C,U as p,C as A,B as u}from"./index-2dP_p1EG.js";import{S as E}from"./search-CwD-o-3E.js";import{F}from"./funnel-XIWJNgH3.js";function B(){const[l,y]=t.useState([]),[x,o]=t.useState([]),[a,b]=t.useState(null),[f,j]=t.useState(!0),[d,m]=t.useState(""),[i,g]=t.useState("all"),[n,h]=t.useState("all");t.useEffect(()=>{N()},[]),t.useEffect(()=>{k()},[d,i,n,l]);async function N(){try{const{data:r,error:s}=await S.from("famous_poems").select("*").order("year_published",{ascending:!0});if(s)throw s;y(r||[]),o(r||[])}catch(r){console.error("Error fetching poems:",r)}finally{j(!1)}}function k(){let r=[...l];if(d){const s=d.toLowerCase();r=r.filter(c=>c.title.toLowerCase().includes(s)||c.author.toLowerCase().includes(s)||c.content.toLowerCase().includes(s))}i!=="all"&&(r=r.filter(s=>s.era===i)),n!=="all"&&(r=r.filter(s=>s.author===n)),o(r)}const v=Array.from(new Set(l.map(r=>r.era).filter(Boolean))),w=Array.from(new Set(l.map(r=>r.author))).sort();return f?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(C,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Famous Poems Archive"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Explore ",l.length," classic poems from renowned poets throughout history."]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:r=>m(r.target.value),placeholder:"Search poems, authors, or content...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e.jsxs("select",{value:i,onChange:r=>g(r.target.value),className:"px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Eras"}),v.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e.jsxs("select",{value:n,onChange:r=>h(r.target.value),className:"px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Authors"}),w.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),(d||i!=="all"||n!=="all")&&e.jsx("button",{onClick:()=>{m(""),g("all"),h("all")},className:"text-sm text-emerald-600 dark:text-emerald-400 hover:underline",children:"Clear filters"})]})]}),x.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No poems found matching your criteria."})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2",children:x.map(r=>e.jsxs("div",{onClick:()=>b(r),className:`p-4 rounded-lg border cursor-pointer transition-all ${(a==null?void 0:a.id)===r.id?"border-emerald-600 bg-emerald-50 dark:bg-emerald-900/20":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 bg-white dark:bg-gray-800"}`,children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1",children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),r.author]}),r.year_published&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),r.year_published]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.era&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:r.era}),r.form&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:r.form}),r.is_public_domain&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"Public Domain"})]})]},r.id))}),e.jsx("div",{className:"lg:sticky lg:top-6",children:a?e.jsxs("div",{className:"p-6 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(u,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a.title}),e.jsxs("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-1",children:["by ",a.author]}),e.jsxs("div",{className:"flex gap-3 text-sm text-gray-600 dark:text-gray-400",children:[a.year_published&&e.jsx("span",{children:a.year_published}),a.era&&e.jsxs("span",{children:["• ",a.era]}),a.form&&e.jsxs("span",{children:["• ",a.form]})]})]})]}),e.jsx("div",{className:"prose dark:prose-invert max-w-none mb-6",children:e.jsx("pre",{className:"whitespace-pre-wrap font-serif text-base leading-relaxed text-gray-800 dark:text-gray-200",children:a.content})}),a.analysis&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 mb-2",children:"Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:a.analysis})]})]}):e.jsxs("div",{className:"p-12 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-center",children:[e.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Select a poem to read"})]})})]})]})}export{B as default};
