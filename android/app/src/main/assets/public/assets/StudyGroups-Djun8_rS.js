import{u as g,r as o,s as i,j as r,G as h,i as b}from"./index-2dP_p1EG.js";import{S as f}from"./search-CwD-o-3E.js";function w(){const{user:a}=g(),[n,c]=o.useState([]),[m,d]=o.useState(!0),[s,u]=o.useState("");o.useEffect(()=>{a&&l()},[a]);const l=async()=>{d(!0);try{const{data:e,error:t}=await i.from("study_groups").select("*").eq("is_private",!1).order("created_at",{ascending:!1});if(t)throw t;c(e||[])}catch(e){console.error("Error loading groups:",e)}finally{d(!1)}},x=async e=>{try{await i.from("study_group_members").insert({group_id:e,user_id:a==null?void 0:a.id,role:"member"}),l()}catch(t){console.error("Error joining group:",t)}},p=n.filter(e=>!s||e.name.toLowerCase().includes(s.toLowerCase())||e.topic.toLowerCase().includes(s.toLowerCase()));return r.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(h,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Study Groups"})]}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search groups...",value:s,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),m?r.jsx("div",{className:"text-center py-12",children:r.jsx("div",{className:"inline-block w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}):r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(e=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full mb-3",children:e.topic}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e.name}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e.description}),r.jsxs("button",{onClick:()=>x(e.id),className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(b,{className:"w-4 h-4"}),"Join Group"]})]},e.id))})]})}export{w as default};
