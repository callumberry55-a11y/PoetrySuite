import{u as v,r as s,s as x,j as e,H as o,q as p}from"./index-2dP_p1EG.js";function k(){const{user:t}=v(),[d,m]=s.useState([]),[h,i]=s.useState(!0),[n,l]=s.useState("favorites");s.useEffect(()=>{t&&c()},[t]);const c=async()=>{i(!0);try{const{data:r,error:a}=await x.from("poem_favorites").select(`
          *,
          poems (id, title, content, created_at)
        `).eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1});if(a)throw a;m(r||[])}catch(r){console.error("Error loading favorites:",r)}finally{i(!1)}},b=async r=>{try{await x.from("poem_favorites").delete().eq("id",r),c()}catch(a){console.error("Error removing favorite:",a)}};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(o,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Favorites & Bookmarks"})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>l("favorites"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${n==="favorites"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(o,{className:"w-4 h-4 inline mr-2"}),"Favorites"]}),e.jsxs("button",{onClick:()=>l("bookmarks"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${n==="bookmarks"?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(p,{className:"w-4 h-4 inline mr-2"}),"Bookmarks"]})]}),h?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No favorites yet. Star poems to save them here!"}):d.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:border-red-400 dark:hover:border-red-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.poems.title}),e.jsx("button",{onClick:()=>b(r.id),className:"text-red-600 hover:text-red-700 dark:text-red-400",children:e.jsx(o,{className:"w-5 h-5 fill-current"})})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap line-clamp-4",children:r.poems.content}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:["Added ",new Date(r.created_at).toLocaleDateString()]})]},r.id))})]})}export{k as default};
