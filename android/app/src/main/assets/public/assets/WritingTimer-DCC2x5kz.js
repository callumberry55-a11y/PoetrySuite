import{u as T,r as s,j as e,V as f,s as _}from"./index-2dP_p1EG.js";import{C,P,a as R,R as W}from"./rotate-ccw-CdDEoKQz.js";function F(){const{user:u}=T(),[a,i]=s.useState(25),[n,r]=s.useState(0),[o,d]=s.useState(!1),[c,m]=s.useState("work"),[g,h]=s.useState(0),[p,b]=s.useState(25),l=s.useRef(null),k=[{label:"5 min",value:5},{label:"15 min",value:15},{label:"25 min (Pomodoro)",value:25},{label:"45 min",value:45},{label:"60 min",value:60}];s.useEffect(()=>(o?l.current=setInterval(()=>{n===0?a===0?w():(i(a-1),r(59)):r(n-1)},1e3):l.current&&clearInterval(l.current),()=>{l.current&&clearInterval(l.current)}),[o,a,n]);const y=async t=>{if(u)try{await _.rpc("log_daily_writing",{p_user_id:u.id,p_word_count:0,p_poems_written:0,p_minutes_spent:t})}catch(x){console.error("Error logging writing session:",x)}},w=async()=>{d(!1),c==="work"?(await y(p),h(g+1),m("break"),i(5),r(0),"Notification"in window&&Notification.permission==="granted"&&new Notification("Writing session complete!",{body:"Time for a 5-minute break"})):(m("work"),i(25),r(0),b(25),"Notification"in window&&Notification.permission==="granted"&&new Notification("Break complete!",{body:"Ready for another writing session?"}))},N=()=>{o||("Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),c==="work"&&b(a+(n>0?1:0))),d(!o)},j=()=>{d(!1),i(25),r(0),m("work")},v=t=>{d(!1),i(t),r(0),m("work")},S=(t,x)=>`${t.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`;return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(f,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Writing Timer"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full mb-4 ${c==="work"?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:c==="work"?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Writing Session"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Break Time"})]})}),e.jsx("div",{className:"text-8xl font-bold text-gray-900 dark:text-white mb-8 font-mono",children:S(a,n)}),e.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[e.jsx("button",{onClick:N,className:"px-8 py-4 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2 text-lg font-medium",children:o?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-6 h-6"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-6 h-6"}),"Start"]})}),e.jsxs("button",{onClick:j,className:"px-8 py-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2 text-lg font-medium",children:[e.jsx(W,{className:"w-6 h-6"}),"Reset"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:k.map(t=>e.jsx("button",{onClick:()=>v(t.value),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t.label},t.value))})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:g}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sessions Completed Today"})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Pomodoro Technique"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Work in focused 25-minute sessions followed by 5-minute breaks. After 4 sessions, take a longer 15-30 minute break. This technique helps maintain focus and prevents burnout."})]})]})}export{F as default};
