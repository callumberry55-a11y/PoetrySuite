import{u as g,r,s as d,j as e,C as n,i as p}from"./index-2dP_p1EG.js";import{V as u}from"./video-JQ6JcfhS.js";import{M as f}from"./map-pin-DqGyWG48.js";function N(){const{user:s}=g(),[i,c]=r.useState([]),[o,l]=r.useState(!0);r.useEffect(()=>{s&&x()},[s]);const x=async()=>{l(!0);try{const{data:t,error:a}=await d.from("poetry_events").select("*").eq("is_public",!0).gte("start_time",new Date().toISOString()).order("start_time",{ascending:!0}).limit(20);if(a)throw a;c(t||[])}catch(t){console.error("Error loading events:",t)}finally{l(!1)}},m=async t=>{try{await d.from("event_attendees").insert({event_id:t,user_id:s==null?void 0:s.id,status:"attending"}),alert("Successfully registered for event!")}catch(a){console.error("Error registering:",a)}},h=t=>new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(n,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Poetry Events"})]}),o?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No upcoming events scheduled."}):i.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full",children:t.event_type}),t.is_virtual&&e.jsx(u,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:h(t.start_time)})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]}),t.max_attendees&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsxs("span",{children:["Max ",t.max_attendees," attendees"]})]})]})]}),e.jsx("button",{onClick:()=>m(t.id),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors whitespace-nowrap",children:"Register"})]})},t.id))})]})}export{N as default};
