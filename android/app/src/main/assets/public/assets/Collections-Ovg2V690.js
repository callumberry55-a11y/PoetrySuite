import{u,r as l,s as x,j as e,y as p}from"./index-2dP_p1EG.js";import{P as y}from"./plus-BwuWPFcm.js";import{G as f}from"./globe-CAKprFxp.js";import{L as j}from"./lock-R6dZoUXY.js";function C(){const{user:t}=u(),[d,m]=l.useState([]),[g,i]=l.useState(!1),[b,c]=l.useState(!0),[a,o]=l.useState({name:"",description:"",is_public:!1});l.useEffect(()=>{t&&n()},[t]);const n=async()=>{c(!0);try{const{data:r,error:s}=await x.from("poetry_collections").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1});if(s)throw s;m(r||[])}catch(r){console.error("Error loading collections:",r)}finally{c(!1)}},h=async r=>{r.preventDefault();try{const{error:s}=await x.from("poetry_collections").insert({...a,user_id:t==null?void 0:t.id});if(s)throw s;i(!1),o({name:"",description:"",is_public:!1}),n()}catch(s){console.error("Error creating collection:",s)}};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Poetry Collections"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"New Collection"]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Organize your poems into curated collections and anthologies."}),b?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.length===0?e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500 dark:text-gray-400",children:"No collections yet. Create one to get started!"}):d.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:border-emerald-400 dark:hover:border-emerald-600 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.name}),r.is_public?e.jsx(f,{className:"w-5 h-5 text-gray-400"}):e.jsx(j,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:r.description}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.poem_count||0," poems"]})]},r.id))}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Collection"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:r=>o({...a,name:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:r=>o({...a,description:r.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_public",checked:a.is_public,onChange:r=>o({...a,is_public:r.target.checked}),className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),e.jsx("label",{htmlFor:"is_public",className:"text-sm text-gray-700 dark:text-gray-300",children:"Make this collection public"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Create"})]})]})]})})]})}export{C as default};
