import{u as _,r as a,s as i,j as e,S as f,L as k,C as P}from"./index-2dP_p1EG.js";import{g as C}from"./ai-C3FY-l-U.js";function I(){const{user:r}=_(),[n,d]=a.useState([]),[j,m]=a.useState(!0),[x,c]=a.useState(!1),[p,u]=a.useState(null),[s,l]=a.useState("all"),b=a.useCallback(async()=>{if(r){m(!0);try{const{data:t,error:h}=await i.from("daily_prompts").select("*").order("prompt_date",{ascending:!1}).limit(30);if(h)throw h;const v=await Promise.all((t||[]).map(async o=>{const{count:w}=await i.from("prompt_responses").select("id",{count:"exact",head:!0}).eq("prompt_id",o.id),{data:y}=await i.from("prompt_responses").select("id").eq("prompt_id",o.id).eq("user_id",r.id).maybeSingle();return{...o,response_count:w||0,user_has_responded:!!y}}));d(v)}catch(t){console.error("Error loading prompts:",t),d([])}finally{m(!1)}}},[r]);a.useEffect(()=>{r&&b()},[r,b]);const N=async()=>{c(!0);try{const t=await C();u(t)}catch(t){console.error("Failed to generate AI prompt:",t)}finally{c(!1)}},g=s==="all"?n:n.filter(t=>t.category===s);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-8 pb-24",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Writing Prompts"}),e.jsx("p",{className:"text-sm sm:text-base text-slate-600 dark:text-slate-400",children:"Get inspired and overcome writer's block"})]}),e.jsxs("button",{onClick:N,disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:[e.jsx(f,{size:20}),x?"Generating...":"AI Prompt"]})]}),p&&e.jsx("div",{className:"mb-6 p-4 sm:p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-2 border-purple-300 dark:border-purple-700 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{size:24,className:"text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-purple-900 dark:text-purple-100 mb-2",children:"AI-Generated Prompt"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:p}),e.jsx("button",{onClick:()=>u(null),className:"mt-3 text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium",children:"Dismiss"})]})]})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap mb-6",children:[e.jsx("button",{onClick:()=>l("all"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${s==="all"?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"All"}),e.jsx("button",{onClick:()=>l("theme"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${s==="theme"?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"Theme"}),e.jsx("button",{onClick:()=>l("form"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${s==="form"?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"Form"}),e.jsx("button",{onClick:()=>l("word"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${s==="word"?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"Word"}),e.jsx("button",{onClick:()=>l("image"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${s==="image"?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"Image"})]}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[g.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/20 dark:to-blue-800/20",children:e.jsx(k,{className:"text-blue-600 dark:text-blue-400",size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 mb-2",children:t.category}),t.user_has_responded&&e.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400 text-xs font-medium",children:"âœ“ Responded"})]})]}),e.jsxs("p",{className:"text-base sm:text-lg text-slate-900 dark:text-white font-serif mb-4",children:['"',t.prompt_text,'"']}),e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(P,{size:14}),new Date(t.prompt_date).toLocaleDateString()]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[t.response_count," ",t.response_count===1?"response":"responses"]})]})]},t.id)),g.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(k,{className:"mx-auto mb-4 text-slate-400",size:48}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No prompts available in this category"})]})]})]})}export{I as default};
